[/]

ClassName=Aggregator
SchemeNames=S00Init
SchemeNames=S01ParseTas
SchemeNames=S02ParseEcscf
SchemeNames=S03FVNTas
SchemeNames=S04FVNEcscf
SchemeNames=S05Rejected
SchemeNames=S99PostProcessing


[/S00Init]

ClassName=AggregationScheme
RuleNames=00.Init
RuleNames=01.SetFileName
RuleNames=02.SetSwitchId
RuleNames=03.SetNormTypeSwitch
RuleNames=10.HandleNewInputFile
RuleNames=11.InsertAuditRecord
RuleNames=12.UpdateAuditNumTickets
RuleNames=98.Log
RuleNames=99.Store


[/S00Init/00.Init]

AdornOps=set auditFileName NONE
AdornOps=set auditNumTickets -1
AdornOps=set auditPodName ${POD_NAME}
AdornOps=set flagAida 0
AdornOps=set flagArborGp 0
AdornOps=set flagArborOpe 0
AdornOps=set flagDiwa 0
AdornOps=set flagEntFixe 0
AdornOps=set flagEntMobile 0
AdornOps=set flagFVN 0
AdornOps=set flagFVNPassed 0
AdornOps=set flagInfocentre 0
AdornOps=set flagInputFileAlreadyProcessed 0
AdornOps=set flagNewInputFile 0
AdornOps=set flagNone 0
AdornOps=set flagOpeRevers 0
AdornOps=set flagParse 0
AdornOps=set flagRes01 0
AdornOps=set flagRes02 0
AdornOps=set flagRes03 0
AdornOps=set flagRes04 0
AdornOps=set flagRes05 0
AdornOps=set flagSap 0
AdornOps=set flagSi800 0
AdornOps=set flagSioFixe 0
AdornOps=set flagSioMobile 0
AdornOps=set flagSioMobileIn 0
AdornOps=set flagSioMobileOut 0
AdornOps=set flagTca 0
AdornOps=set flagTedh 0
AdornOps=set Norm_CodeErreur ""
AdornOps=set Norm_CollectionChain IMS
AdornOps=set Norm_DonneesErreur ""
AdornOps=set Norm_NbRecyclage 0
AdornOps=set Norm_Res01 ""
AdornOps=set Norm_Res02 ""
AdornOps=set Norm_Res03 ""
AdornOps=set Norm_Res04 ""
AdornOps=set Norm_Res05 ""
AdornOps=set Norm_Res06 ""
AdornOps=set Norm_Res07 ""
AdornOps=set Norm_Res08 ""
AdornOps=set Norm_Res09 ""
AdornOps=set Norm_Res10 ""
AdornOps=set Norm_Res11 ""
AdornOps=set Norm_Res12 ""
AdornOps=set Norm_Res13 ""
AdornOps=set Norm_Res14 ""
AdornOps=set Norm_Res15 ""
AdornOps=set Norm_Res16 ""
AdornOps=set Norm_Res17 ""
AdornOps=set Norm_Res18 ""
AdornOps=set Norm_Res20 ""
AdornOps=set Norm_SwitchIdIn IMS
AdornOps=set processType IMSR10
AdornOps=set recordTag 0
AdornOps=set switchId IMS
AdornOps=setifnull auditPodName NONE
AdornOps=setifnull flagInputFileAlreadyProcessed 0
AdornOps=setsystime EndTime
ClassName=AdornmentRule


[/S00Init/01.SetFileName]

ClassName=RuleChain
RuleNames=10.SetInputFileName
RuleNames=20.SplitInputFileName


[/S00Init/01.SetFileName/10.SetInputFileName]

ClassName=PerlRegExStringRule
DestinationAttribute=inputFileName
Operation=split
RegExPattern=.*/([^/]*)$
SourceAttribute=inputFileName


[/S00Init/01.SetFileName/20.SplitInputFileName]

ClassName=PerlRegExStringRule
DestinationAttribute=auxStr1
DestinationAttribute=inputFileAux
Operation=split
RegExPattern=(.*)\.(.*)?
SourceAttribute=inputFileName


[/S00Init/02.SetSwitchId]

ClassName=PerlRegExStringRule
DestinationAttribute=switchId
Operation=split
RegExPattern=(^[^-_]*)_-.*
SourceAttribute=inputFileName


[/S00Init/03.SetNormTypeSwitch]

ClassName=ConditionalRule
Conditions=inputFileAux,=,TASR10
TrueRuleChain=01.TypeSwitchtas
FalseRuleChain=02.TypeSwitchecscfr


[/S00Init/03.SetNormTypeSwitch/01.TypeSwitchtas]

AdornOps=set Norm_TypeSwitch tas
ClassName=AdornmentRule


[/S00Init/03.SetNormTypeSwitch/02.TypeSwitchecscfr]

AdornOps=set Norm_TypeSwitch ecscf
ClassName=AdornmentRule


[/S00Init/10.HandleNewInputFile]

ClassName=com.hp.usage.datastruct.scripting.rule.ScriptingRule
ScriptPath=file:///var/opt/bits/App/scripts/rules/handleNewInputFile.groovy
ScriptLanguage=groovy


[/S00Init/11.InsertAuditRecord]

ClassName=ConditionalRule
Conditions=flagNewInputFile,=,1
TrueRuleChain=01.InsertAuditRecord


[/S00Init/11.InsertAuditRecord/01.InsertAuditRecord]

ClassName=com.hp.siu.collector.rules.JDBCUpdateRule
CommonPolicyID=PolicySiu20
SQLStatement=insert into audit_files (SCOPE, LEVEL, FILE_NAME, POD_NAME, PROC_DATEBEGIN) values ('IMS', 'l1', %inputFileName, %auditPodName, now())


[/S00Init/11.InsertAuditRecord/01.InsertAuditRecord/ErrorRule]

ClassName=RuleChain
RuleNames=00.LogError


[/S00Init/11.InsertAuditRecord/01.InsertAuditRecord/ErrorRule/00.LogError]

ClassName=LogNMERule
LogLevel=ERROR
Message=>>>> S00Init/11.InsertAuditRecord/01.InsertAuditRecord/ErrorRule/00.LogError: Failed to insert audit record for file %inputFileName


[/S00Init/12.UpdateAuditNumTickets]

ClassName=ConditionalRule
Conditions=auditNumTickets,!=,-1
Conditions=auditFileName,!=,NONE
Operations=and
TrueRuleChain=01.UpdateAuditRecord


[/S00Init/12.UpdateAuditNumTickets/01.UpdateAuditRecord]

ClassName=com.hp.siu.collector.rules.JDBCUpdateRule
CommonPolicyID=PolicySiu20
SQLStatement=update AUDIT_FILES set NUM_TICKETS = %auditNumTickets where FILE_NAME = %auditFileName


[/S00Init/12.UpdateAuditNumTickets/01.UpdateAuditRecord/ErrorRule]

ClassName=RuleChain
RuleNames=00.LogError


[/S00Init/12.UpdateAuditNumTickets/01.UpdateAuditRecord/ErrorRule/00.LogError]

ClassName=LogNMERule
LogLevel=ERROR
Message=>>>> S00Init/12.UpdateAuditNumTickets/01.UpdateAuditRecord/ErrorRule/00.LogError: Failed to update audit record for file %auditFileName

[/S00Init/98.Log]

ClassName=LogNMERule
LogLevel=DEBUG
Message=>>>> S00Init/98.Log :
NullAlso=false


[/S00Init/99.Store]

Attributes=inputFileName
ClassName=StoreRule


[/S01ParseTas]

ClassName=AggregationScheme
RuleNames=00.FilterTas
RuleNames=01.Init
RuleNames=02.Stats
RuleNames=02b.Log
RuleNames=03.ExtractCallDirection
RuleNames=04.ExtractCalledPartyTelUri
RuleNames=05.ExtractCalledPartySipUri
RuleNames=06.ExtractInvolvedPartyTelUri
RuleNames=07.ExtractInvolvedPartySipUri
RuleNames=08.ExtractRequestedPartyTelUri
RuleNames=09.ExtractRequestedPartySipUri
RuleNames=10.ExtractServiceDeliveryStartTimeStamp
RuleNames=11.ExtractServiceDeliveryEndTimeStamp
RuleNames=12.ExtractCauseForRecordClosing
RuleNames=13.ExtractServiceType
RuleNames=14.ExtractAssociatedNumber
RuleNames=15.ExtractAccessNetworkInformation
RuleNames=16.ExtractChargingIdentifier
RuleNames=17.ExtractCallingPartyNumberWholesaleId
RuleNames=18.ExtractCalledPartyNumberWholesaleId
RuleNames=19.ExtractLocalRecordSequenceNumber
RuleNames=98.Log
RuleNames=99.Store


[/S01ParseTas/00.FilterTas]

ClassName=FilterRule
Conditions=Norm_TypeSwitch,=,tas
OnMatch=keep


[/S01ParseTas/01.Init]

AdornOps=set flagParse 1
AdornOps=set flagFVN 0
AdornOps=set callingPartyNumberWholesaleId NONE
AdornOps=set calledPartyNumberWholesaleId NONE
AdornOps=set accessNetworkInformationStr NONE
AdornOps=set associatedNumber NONE
AdornOps=set direction NONE
AdornOps=set calledPartySipUri NONE
AdornOps=set calledPartyTelUri NONE
AdornOps=set causeForRecordClosing NONE
AdornOps=set chargingIdentifier NONE
AdornOps=set involvedPartySipUri NONE
AdornOps=set involvedPartyTelUri NONE
AdornOps=set requestedPartySipUri NONE
AdornOps=set requestedPartyTelUri NONE
AdornOps=set serviceDeliveryEndTimeStampStr NONE
AdornOps=set serviceDeliveryStartTimeStampStr NONE
AdornOps=set sSServiceType NONE
AdornOps=set schemeName S01ParseTas
ClassName=AdornmentRule


[/S01ParseTas/02.Stats]

ClassName=com.hp.usage.collector.rules.UsageParametersRule
Set=CollectionModule
Operations=inc,InputTickets
UsageParametersFile=file:///var/opt/bits/App/stats/fixe/Fixe_Statistics.config


[/S01ParseTas/02b.Log]

ClassName=LogNMERule
LogLevel=DEBUG
Message=>>>> S01ParseTas/02b.Log :
NullAlso=false


[/S01ParseTas/03.ExtractCallDirection]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME


[/S01ParseTas/03.ExtractCallDirection/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.aSRecord.recordExtensions.ManagementExtensions[0].information.informationExtensions.extensionData.call_Direction),==,true
SNMEType=IMSR10:Record


[/S01ParseTas/03.ExtractCallDirection/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.aSRecord.recordExtensions.ManagementExtensions[0].information.informationExtensions.extensionData.call_Direction,direction


[/S01ParseTas/04.ExtractCalledPartyTelUri]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME


[/S01ParseTas/04.ExtractCalledPartyTelUri/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.aSRecord.called_Party_Address.tEL_URI),==,true
SNMEType=IMSR10:Record


[/S01ParseTas/04.ExtractCalledPartyTelUri/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.aSRecord.called_Party_Address.tEL_URI,calledPartyTelUri


[/S01ParseTas/05.ExtractCalledPartySipUri]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME


[/S01ParseTas/05.ExtractCalledPartySipUri/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.aSRecord.called_Party_Address.sIP_URI),==,true
SNMEType=IMSR10:Record


[/S01ParseTas/05.ExtractCalledPartySipUri/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.aSRecord.called_Party_Address.sIP_URI,calledPartySipUri


[/S01ParseTas/06.ExtractInvolvedPartyTelUri]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME


[/S01ParseTas/06.ExtractInvolvedPartyTelUri/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.aSRecord.list_Of_Calling_Party_Address.ListOfInvolvedParties[0].tEL_URI),==,true
SNMEType=IMSR10:Record


[/S01ParseTas/06.ExtractInvolvedPartyTelUri/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.aSRecord.list_Of_Calling_Party_Address.ListOfInvolvedParties[0].tEL_URI,involvedPartyTelUri


[/S01ParseTas/07.ExtractInvolvedPartySipUri]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME


[/S01ParseTas/07.ExtractInvolvedPartySipUri/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.aSRecord.list_Of_Calling_Party_Address.ListOfInvolvedParties[0].sIP_URI),==,true
SNMEType=IMSR10:Record


[/S01ParseTas/07.ExtractInvolvedPartySipUri/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.aSRecord.list_Of_Calling_Party_Address.ListOfInvolvedParties[0].sIP_URI,involvedPartySipUri


[/S01ParseTas/08.ExtractRequestedPartyTelUri]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME


[/S01ParseTas/08.ExtractRequestedPartyTelUri/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.aSRecord.requested_Party_Address.tEL_URI),==,true
SNMEType=IMSR10:Record


[/S01ParseTas/08.ExtractRequestedPartyTelUri/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.aSRecord.requested_Party_Address.tEL_URI,requestedPartyTelUri


[/S01ParseTas/09.ExtractRequestedPartySipUri]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME


[/S01ParseTas/09.ExtractRequestedPartySipUri/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.aSRecord.requested_Party_Address.sIP_URI),==,true
SNMEType=IMSR10:Record


[/S01ParseTas/09.ExtractRequestedPartySipUri/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.aSRecord.requested_Party_Address.sIP_URI,requestedPartySipUri


[/S01ParseTas/10.ExtractServiceDeliveryStartTimeStamp]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME
TrueRuleChain=02.Bin2Str
TrueRuleChain=02b.Log
TrueRuleChain=03.Set
TrueRuleChain=03b.Log


[/S01ParseTas/10.ExtractServiceDeliveryStartTimeStamp/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.aSRecord.serviceDeliveryStartTimeStamp),==,true
SNMEType=IMSR10:Record


[/S01ParseTas/10.ExtractServiceDeliveryStartTimeStamp/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.aSRecord.serviceDeliveryStartTimeStamp,dateTimeBinary


[/S01ParseTas/10.ExtractServiceDeliveryStartTimeStamp/02.Bin2Str]

AdornOps=hexstr dateTimeBinary serviceDeliveryStartTimeStampStr
ClassName=AdornmentRule


[/S01ParseTas/10.ExtractServiceDeliveryStartTimeStamp/02b.Log]

Attributes=dateTimeBinary
Attributes=serviceDeliveryStartTimeStampStr
ClassName=LogNMERule
LogLevel=DEBUG
Message=>>>> S01ParseTas/10.ExtractServiceDeliveryStartTimeStamp/02b.Log :
NullAlso=true


[/S01ParseTas/10.ExtractServiceDeliveryStartTimeStamp/03.Set]

AdornOps=substr 0 12 serviceDeliveryStartTimeStampStr auxStr
AdornOps=set serviceDeliveryStartTimeStampStr 20
AdornOps=+ serviceDeliveryStartTimeStampStr auxStr serviceDeliveryStartTimeStampStr
ClassName=AdornmentRule


[/S01ParseTas/10.ExtractServiceDeliveryStartTimeStamp/03b.Log]

Attributes=serviceDeliveryStartTimeStampStr
ClassName=LogNMERule
LogLevel=DEBUG
Message=>>>> S01ParseTas/10.ExtractServiceDeliveryStartTimeStamp/03b.Log :
NullAlso=true


[/S01ParseTas/11.ExtractServiceDeliveryEndTimeStamp]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME
TrueRuleChain=02.Bin2Str
TrueRuleChain=03.Set


[/S01ParseTas/11.ExtractServiceDeliveryEndTimeStamp/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.aSRecord.serviceDeliveryEndTimeStamp),==,true
SNMEType=IMSR10:Record


[/S01ParseTas/11.ExtractServiceDeliveryEndTimeStamp/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.aSRecord.serviceDeliveryEndTimeStamp,dateTimeBinary


[/S01ParseTas/11.ExtractServiceDeliveryEndTimeStamp/02.Bin2Str]

AdornOps=hexstr dateTimeBinary serviceDeliveryEndTimeStampStr
ClassName=AdornmentRule


[/S01ParseTas/11.ExtractServiceDeliveryEndTimeStamp/03.Set]

AdornOps=substr 0 12 serviceDeliveryEndTimeStampStr auxStr
AdornOps=set serviceDeliveryEndTimeStampStr 20
AdornOps=+ serviceDeliveryEndTimeStampStr auxStr serviceDeliveryEndTimeStampStr
ClassName=AdornmentRule


[/S01ParseTas/12.ExtractCauseForRecordClosing]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME


[/S01ParseTas/12.ExtractCauseForRecordClosing/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.aSRecord.causeForRecordClosing),==,true
SNMEType=IMSR10:Record


[/S01ParseTas/12.ExtractCauseForRecordClosing/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.aSRecord.causeForRecordClosing,causeForRecordClosing


[/S01ParseTas/13.ExtractServiceType]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME


[/S01ParseTas/13.ExtractServiceType/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.aSRecord.recordExtensions.ManagementExtensions[0].information.informationExtensions.extensionData.supplServiceInfos.ALURecordExtensions_generatedType_39[0].sS_Service_Type),==,true
SNMEType=IMSR10:Record


[/S01ParseTas/13.ExtractServiceType/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.aSRecord.recordExtensions.ManagementExtensions[0].information.informationExtensions.extensionData.supplServiceInfos.ALURecordExtensions_generatedType_39[0].sS_Service_Type,sSServiceType


[/S01ParseTas/14.ExtractAssociatedNumber]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME


[/S01ParseTas/14.ExtractAssociatedNumber/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.aSRecord.recordExtensions.ManagementExtensions[0].information.informationExtensions.extensionData.supplServiceInfos.ALURecordExtensions_generatedType_39[0].associated_Number),==,true
SNMEType=IMSR10:Record


[/S01ParseTas/14.ExtractAssociatedNumber/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.aSRecord.recordExtensions.ManagementExtensions[0].information.informationExtensions.extensionData.supplServiceInfos.ALURecordExtensions_generatedType_39[0].associated_Number,associatedNumber


[/S01ParseTas/15.ExtractAccessNetworkInformation]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME
TrueRuleChain=02.Bin2Str


[/S01ParseTas/15.ExtractAccessNetworkInformation/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.aSRecord.accessNetworkInformation),==,true
SNMEType=IMSR10:Record


[/S01ParseTas/15.ExtractAccessNetworkInformation/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.aSRecord.accessNetworkInformation,accessNetworkInformationBin


[/S01ParseTas/15.ExtractAccessNetworkInformation/02.Bin2Str]

AdornOps=bin2str accessNetworkInformationBin accessNetworkInformationStr
ClassName=AdornmentRule


[/S01ParseTas/16.ExtractChargingIdentifier]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME
TrueRuleChain=02.Bin2Str


[/S01ParseTas/16.ExtractChargingIdentifier/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.aSRecord.iMS_Charging_Identifier),==,true
SNMEType=IMSR10:Record


[/S01ParseTas/16.ExtractChargingIdentifier/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.aSRecord.iMS_Charging_Identifier,binAux


[/S01ParseTas/16.ExtractChargingIdentifier/02.Bin2Str]

AdornOps=hexstr binAux chargingIdentifier
ClassName=AdornmentRule


[/S01ParseTas/17.ExtractCallingPartyNumberWholesaleId]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME


[/S01ParseTas/17.ExtractCallingPartyNumberWholesaleId/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.aSRecord.recordExtensions.ManagementExtensions[0].information.informationExtensions.extensionData.calling_Party_Number_Wholesale_ID),==,true
SNMEType=IMSR10:Record


[/S01ParseTas/17.ExtractCallingPartyNumberWholesaleId/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.aSRecord.recordExtensions.ManagementExtensions[0].information.informationExtensions.extensionData.calling_Party_Number_Wholesale_ID,callingPartyNumberWholesaleId


[/S01ParseTas/18.ExtractCalledPartyNumberWholesaleId]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME


[/S01ParseTas/18.ExtractCalledPartyNumberWholesaleId/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.aSRecord.recordExtensions.ManagementExtensions[0].information.informationExtensions.extensionData.called_Party_Number_Wholesale_ID),==,true
SNMEType=IMSR10:Record


[/S01ParseTas/18.ExtractCalledPartyNumberWholesaleId/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.aSRecord.recordExtensions.ManagementExtensions[0].information.informationExtensions.extensionData.called_Party_Number_Wholesale_ID,calledPartyNumberWholesaleId


[/S01ParseTas/19.ExtractLocalRecordSequenceNumber]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.aSRecord.localRecordSequenceNumber,localRecordSequenceNumber,0


[/S01ParseTas/98.Log]

ClassName=LogNMERule
LogLevel=DEBUG
Message=>>>> S01ParseTas/98.Log :
NullAlso=false


[/S01ParseTas/99.Store]

Attributes=inputFileName
ClassName=StoreRule


[/S02ParseEcscf]

ClassName=AggregationScheme
RuleNames=00.FilterEcscf
RuleNames=01.Init
RuleNames=02.Stats
RuleNames=02b.Log
RuleNames=04.ExtractCalledPartyTelUri
RuleNames=05.ExtractCalledPartySipUri
RuleNames=06.ExtractInvolvedPartyTelUri
RuleNames=07.ExtractInvolvedPartySipUri
RuleNames=08.ExtractRequestedPartyTelUri
RuleNames=09.ExtractRequestedPartySipUri
RuleNames=10.ExtractServiceDeliveryStartTimeStamp
RuleNames=11.ExtractServiceDeliveryEndTimeStamp
RuleNames=12.ExtractCauseForRecordClosing
RuleNames=15.ExtractAccessNetworkInformation
RuleNames=16.ExtractChargingIdentifier
RuleNames=17.ExtractLocalRecordSequenceNumber
RuleNames=98.Log
RuleNames=99.Store


[/S02ParseEcscf/00.FilterEcscf]

ClassName=FilterRule
Conditions=Norm_TypeSwitch,=,ecscf
OnMatch=keep


[/S02ParseEcscf/01.Init]

AdornOps=set flagParse 1
AdornOps=set flagFVN 0
AdornOps=set callingPartyNumberWholesaleId NONE
AdornOps=set calledPartyNumberWholesaleId NONE
AdornOps=set accessNetworkInformationStr NONE
AdornOps=set associatedNumber NONE
AdornOps=set direction NONE
AdornOps=set calledPartySipUri NONE
AdornOps=set calledPartyTelUri NONE
AdornOps=set causeForRecordClosing NONE
AdornOps=set chargingIdentifier NONE
AdornOps=set involvedPartySipUri NONE
AdornOps=set involvedPartyTelUri NONE
AdornOps=set requestedPartySipUri NONE
AdornOps=set requestedPartyTelUri NONE
AdornOps=set serviceDeliveryEndTimeStampStr NONE
AdornOps=set serviceDeliveryStartTimeStampStr NONE
AdornOps=set sSServiceType NONE
AdornOps=set schemeName S02ParseEcscf
ClassName=AdornmentRule


[/S02ParseEcscf/02.Stats]

ClassName=com.hp.usage.collector.rules.UsageParametersRule
Set=CollectionModule
Operations=inc,InputTickets
UsageParametersFile=file:///var/opt/bits/App/stats/fixe/Fixe_Statistics.config


[/S02ParseEcscf/02b.Log]

ClassName=LogNMERule
LogLevel=DEBUG
Message=>>>> S02ParseEcscf/02b.Log :
NullAlso=false


[/S02ParseEcscf/04.ExtractCalledPartyTelUri]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME


[/S02ParseEcscf/04.ExtractCalledPartyTelUri/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.eCSCFRecord.called_Party_Address.tEL_URI),==,true
SNMEType=IMSR10:Record


[/S02ParseEcscf/04.ExtractCalledPartyTelUri/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.eCSCFRecord.called_Party_Address.tEL_URI,calledPartyTelUri


[/S02ParseEcscf/05.ExtractCalledPartySipUri]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME


[/S02ParseEcscf/05.ExtractCalledPartySipUri/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.eCSCFRecord.called_Party_Address.sIP_URI),==,true
SNMEType=IMSR10:Record


[/S02ParseEcscf/05.ExtractCalledPartySipUri/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.eCSCFRecord.called_Party_Address.sIP_URI,calledPartySipUri


[/S02ParseEcscf/06.ExtractInvolvedPartyTelUri]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME


[/S02ParseEcscf/06.ExtractInvolvedPartyTelUri/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.eCSCFRecord.list_Of_Calling_Party_Address.ListOfInvolvedParties[0].tEL_URI),==,true
SNMEType=IMSR10:Record


[/S02ParseEcscf/06.ExtractInvolvedPartyTelUri/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.eCSCFRecord.list_Of_Calling_Party_Address.ListOfInvolvedParties[0].tEL_URI,involvedPartyTelUri


[/S02ParseEcscf/07.ExtractInvolvedPartySipUri]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME


[/S02ParseEcscf/07.ExtractInvolvedPartySipUri/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.eCSCFRecord.list_Of_Calling_Party_Address.ListOfInvolvedParties[0].sIP_URI),==,true
SNMEType=IMSR10:Record


[/S02ParseEcscf/07.ExtractInvolvedPartySipUri/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.eCSCFRecord.list_Of_Calling_Party_Address.ListOfInvolvedParties[0].sIP_URI,involvedPartySipUri


[/S02ParseEcscf/08.ExtractRequestedPartyTelUri]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME


[/S02ParseEcscf/08.ExtractRequestedPartyTelUri/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.eCSCFRecord.requested_Party_Address.tEL_URI),==,true
SNMEType=IMSR10:Record


[/S02ParseEcscf/08.ExtractRequestedPartyTelUri/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.eCSCFRecord.requested_Party_Address.tEL_URI,requestedPartyTelUri


[/S02ParseEcscf/09.ExtractRequestedPartySipUri]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME


[/S02ParseEcscf/09.ExtractRequestedPartySipUri/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.eCSCFRecord.requested_Party_Address.sIP_URI),==,true
SNMEType=IMSR10:Record


[/S02ParseEcscf/09.ExtractRequestedPartySipUri/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.eCSCFRecord.requested_Party_Address.sIP_URI,requestedPartySipUri


[/S02ParseEcscf/10.ExtractServiceDeliveryStartTimeStamp]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME
TrueRuleChain=02.Bin2Str
TrueRuleChain=03.Set


[/S02ParseEcscf/10.ExtractServiceDeliveryStartTimeStamp/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.eCSCFRecord.serviceDeliveryStartTimeStamp),==,true
SNMEType=IMSR10:Record


[/S02ParseEcscf/10.ExtractServiceDeliveryStartTimeStamp/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.eCSCFRecord.serviceDeliveryStartTimeStamp,dateTimeBinary


[/S02ParseEcscf/10.ExtractServiceDeliveryStartTimeStamp/02.Bin2Str]

AdornOps=hexstr dateTimeBinary serviceDeliveryStartTimeStampStr
ClassName=AdornmentRule


[/S02ParseEcscf/10.ExtractServiceDeliveryStartTimeStamp/03.Set]

AdornOps=substr 0 12 serviceDeliveryStartTimeStampStr auxStr
AdornOps=set serviceDeliveryStartTimeStampStr 20
AdornOps=+ serviceDeliveryStartTimeStampStr auxStr serviceDeliveryStartTimeStampStr
ClassName=AdornmentRule


[/S02ParseEcscf/11.ExtractServiceDeliveryEndTimeStamp]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME
TrueRuleChain=02.Bin2Str
TrueRuleChain=03.Set


[/S02ParseEcscf/11.ExtractServiceDeliveryEndTimeStamp/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.eCSCFRecord.serviceDeliveryEndTimeStamp),==,true
SNMEType=IMSR10:Record


[/S02ParseEcscf/11.ExtractServiceDeliveryEndTimeStamp/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.eCSCFRecord.serviceDeliveryEndTimeStamp,dateTimeBinary


[/S02ParseEcscf/11.ExtractServiceDeliveryEndTimeStamp/02.Bin2Str]

AdornOps=hexstr dateTimeBinary serviceDeliveryEndTimeStampStr
ClassName=AdornmentRule


[/S02ParseEcscf/11.ExtractServiceDeliveryEndTimeStamp/03.Set]

AdornOps=substr 0 12 serviceDeliveryEndTimeStampStr auxStr
AdornOps=set serviceDeliveryEndTimeStampStr 20
AdornOps=+ serviceDeliveryEndTimeStampStr auxStr serviceDeliveryEndTimeStampStr
ClassName=AdornmentRule


[/S02ParseEcscf/12.ExtractCauseForRecordClosing]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME


[/S02ParseEcscf/12.ExtractCauseForRecordClosing/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.eCSCFRecord.causeForRecordClosing),==,true
SNMEType=IMSR10:Record


[/S02ParseEcscf/12.ExtractCauseForRecordClosing/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.eCSCFRecord.causeForRecordClosing,causeForRecordClosing


[/S02ParseEcscf/15.ExtractAccessNetworkInformation]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME
TrueRuleChain=02.Bin2Str


[/S02ParseEcscf/15.ExtractAccessNetworkInformation/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.eCSCFRecord.accessNetworkInformation),==,true
SNMEType=IMSR10:Record


[/S02ParseEcscf/15.ExtractAccessNetworkInformation/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.eCSCFRecord.accessNetworkInformation,accessNetworkInformationBin


[/S02ParseEcscf/15.ExtractAccessNetworkInformation/02.Bin2Str]

AdornOps=bin2str accessNetworkInformationBin accessNetworkInformationStr
ClassName=AdornmentRule


[/S02ParseEcscf/16.ExtractChargingIdentifier]

ClassName=ConditionalRule
TrueRuleChain=01.ExtractFromSNME
TrueRuleChain=02.Bin2Str


[/S02ParseEcscf/16.ExtractChargingIdentifier/Condition]

ClassName=SNMECondition
Condition=isSet(iMSRecord.eCSCFRecord.iMS_Charging_Identifier),==,true
SNMEType=IMSR10:Record


[/S02ParseEcscf/16.ExtractChargingIdentifier/01.ExtractFromSNME]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.eCSCFRecord.iMS_Charging_Identifier,binAux


[/S02ParseEcscf/16.ExtractChargingIdentifier/02.Bin2Str]

AdornOps=hexstr binAux chargingIdentifier
ClassName=AdornmentRule


[/S02ParseEcscf/17.ExtractLocalRecordSequenceNumber]

ClassName=com.hp.usage.nme.rules.NMEConversionRule
CreateSNMEIfNeeded=true
SNMEType=IMSR10:Record
StructuredNMEToNMEMap=iMSRecord.eCSCFRecord.localRecordSequenceNumber,localRecordSequenceNumber,0


[/S02ParseEcscf/98.Log]

ClassName=LogNMERule
LogLevel=DEBUG
Message=>>>> S02ParseEcscf/98.Log :
NullAlso=false


[/S02ParseEcscf/99.Store]

Attributes=inputFileName
ClassName=StoreRule


[/S03FVNTas]

ClassName=AggregationScheme
RuleNames=00.FilterTas
RuleNames=01.Init
RuleNames=02.Stats
RuleNames=02b.Log
RuleNames=03.CheckSyntax
RuleNames=04.SetNormFields
RuleNames=05.ApplyFiltering
RuleNames=98.Log
RuleNames=99.Store


[/S03FVNTas/00.FilterTas]

ClassName=FilterRule
Conditions=Norm_TypeSwitch,=,tas
OnMatch=keep


[/S03FVNTas/01.Init]

AdornOps=set flagParse 0
AdornOps=set flagFVN 1
AdornOps=set flagInfocentre 1
AdornOps=set flagTedh 1
AdornOps=set flagFVNPassed 1
AdornOps=set flagArborGp 0
AdornOps=set flagArborOpe 0
AdornOps=set flagDiwa 0
AdornOps=set flagEntFixe 0
AdornOps=set flagEntMobile 0
AdornOps=set flagNone 0
AdornOps=set flagSap 0
AdornOps=set flagSi800 0
AdornOps=set flagSioFixe 0
AdornOps=set flagSioMobile 0
AdornOps=set flagSioMobileIn 0
AdornOps=set flagSioMobileOut 0
AdornOps=set flagTca 0
AdornOps=set rejectCode NONE
AdornOps=set rejectKey ""
AdornOps=set serviceDeliveryEndTimeStampTime 0
AdornOps=set serviceDeliveryStartTimeStampTime 0
AdornOps=set Norm_ANum ""
AdornOps=set Norm_ANumOrigine ""
AdornOps=set Norm_ANumNature 0
AdornOps=set Norm_ANumNetworkPrefix ""
AdornOps=set Norm_ANumPortaPrefix ""
AdornOps=set Norm_AttestationInfo ""
AdornOps=set Norm_BNum ""
AdornOps=set Norm_BNumNature 0
AdornOps=set Norm_BNumNetworkPrefix ""
AdornOps=set Norm_BNumPortaPrefix ""
AdornOps=set Norm_BillClassOp ""
AdornOps=set Norm_CNum ""
AdornOps=set Norm_CNumNature 0
AdornOps=set Norm_CNumNetworkPrefix ""
AdornOps=set Norm_CNumPortaPrefix ""
AdornOps=set Norm_CategorieRSVA ""
AdornOps=set Norm_CodeOffre ""
AdornOps=set Norm_CodePrix ""
AdornOps=set Norm_DateTime ""
AdornOps=set Norm_DurFranchiseHp 0
AdornOps=set Norm_Duree 0
AdornOps=set Norm_IdentityBypass ""
AdornOps=set Norm_IdentityBypassToken ""
AdornOps=set Norm_IdentityUrl ""
AdornOps=set Norm_IndexSchemaErreur 0
AdornOps=set Norm_LocId ""
AdornOps=set Norm_NDS ""
AdornOps=set Norm_NDSNature 0
AdornOps=set Norm_OpeSva ""
AdornOps=set Norm_OriginationSPID ""
AdornOps=set Norm_OrigInt 0
AdornOps=set Norm_ANumOrigineNature 0
AdornOps=set Norm_Prefixe ""
AdornOps=set Norm_ReasonCode ""
AdornOps=set Norm_ReasonText ""
AdornOps=set Norm_RecordId ""
AdornOps=set Norm_Res01 ""
AdornOps=set Norm_Res02 ""
AdornOps=set Norm_Res03 ""
AdornOps=set Norm_Res04 ""
AdornOps=set Norm_Res05 ""
AdornOps=set Norm_Res06 ""
AdornOps=set Norm_Res07 ""
AdornOps=set Norm_Res08 ""
AdornOps=set Norm_Res09 ""
AdornOps=set Norm_Res10 ""
AdornOps=set Norm_ResultatAppel ""
AdornOps=set Norm_RecordId 0
AdornOps=set Norm_SensCDR ""
AdornOps=set Norm_ServiceKeyInt ""
AdornOps=lower switchId Norm_SwitchIdFromFilename
AdornOps=set Norm_SwitchIdOut IMS
AdornOps=set Norm_Sysfact ""
AdornOps=set Norm_TaxationArriere ""
AdornOps=set Norm_TpsAttente 0
AdornOps=set Norm_TrunkIN IMSE
AdornOps=set Norm_TrunkOUT IMSS
AdornOps=set Norm_TypeAcces ""
AdornOps=set Norm_TypeOffre ""
AdornOps=set Norm_TypeService ""
AdornOps=set Norm_TypeTicket 0
AdornOps=set Norm_TypeTrunkIN ""
AdornOps=set Norm_TypeTrunkOUT ""
AdornOps=set Norm_TypeUsageEnt ""
AdornOps=set Norm_UT 0
AdornOps=set Norm_VerstatValue ""
AdornOps=set Norm_IntercoIN 0
AdornOps=set Norm_IntercoOUT 0
AdornOps=set Norm_Valo ""
AdornOps=set Norm_PortabiliteSpec ""
AdornOps=set Norm_BillClassGp ""
AdornOps=set Norm_SensSIO 0
AdornOps=set schemeName S03FVNTas
ClassName=AdornmentRule


[/S03FVNTas/02.Stats]

ClassName=com.hp.usage.collector.rules.UsageParametersRule
Set=ParsingModule
Operations=inc,decodedTickets
UsageParametersFile=file:///var/opt/bits/App/stats/fixe/Fixe_Statistics.config


[/S03FVNTas/02b.Log]

ClassName=LogNMERule
LogLevel=DEBUG
Message=>>>> S03FVNTas/02b.Log :
NullAlso=true


[/S03FVNTas/03.CheckSyntax]

ClassName=RuleChain
RuleNames=01.CheckSyntaxInvolvedParty
RuleNames=02.CheckSyntaxCalledParty
RuleNames=03.CheckSyntaxOthers


[/S03FVNTas/03.CheckSyntax/01.CheckSyntaxInvolvedParty]

ClassName=ConditionalRule
Conditions=involvedPartyTelUri,=,NONE
Conditions=involvedPartySipUri,=,NONE
Operations=and
TrueRuleChain=01.SetRejectCodeSyntaxInvolvedParty


[/S03FVNTas/03.CheckSyntax/01.CheckSyntaxInvolvedParty/01.SetRejectCodeSyntaxInvolvedParty]

AdornOps=set rejectCode SYN:FVN:INVOLVED-PARTY
AdornOps=set rejectKey involvedPartyTelUri=
AdornOps=+ rejectKey involvedPartyTelUri rejectKey
AdornOps=+ rejectKey ,involvedPartySipUri= rejectKey
AdornOps=+ rejectKey involvedPartySipUri rejectKey
ClassName=AdornmentRule


[/S03FVNTas/03.CheckSyntax/02.CheckSyntaxCalledParty]

ClassName=ConditionalRule
Conditions=calledPartyTelUri,=,NONE
Conditions=calledPartySipUri,=,NONE
Operations=and
TrueRuleChain=01.SetRejectCodeSyntaxCalledParty


[/S03FVNTas/03.CheckSyntax/02.CheckSyntaxCalledParty/01.SetRejectCodeSyntaxCalledParty]

AdornOps=set rejectCode SYN:FVN:CALLED-PARTY
AdornOps=set rejectKey calledPartyTelUri=
AdornOps=+ rejectKey calledPartyTelUri rejectKey
AdornOps=+ rejectKey ,calledPartySipUri= rejectKey
AdornOps=+ rejectKey calledPartySipUri rejectKey
ClassName=AdornmentRule


[/S03FVNTas/03.CheckSyntax/03.CheckSyntaxOthers]

ClassName=SwitchConditionRule
Conditions=direction,!within,[0,1]
Conditions=serviceDeliveryStartTimeStampStr,=,NONE
Conditions=causeForRecordClosing,=,NONE
Operations=None
T01_SetRejectCodeSyntaxCallDirection=01.01.SetRejectCodeSyntaxCallDirection
T02_SetRejectCodeSyntaxServiceDeliveryStartTimeStamp=02.01.SetRejectCodeSyntaxServiceDeliveryStartTimeStamp
T03_SetRejectCodeSyntaxCauseForRecordClosing=03.01.SetRejectCodeSyntaxCauseForRecordClosing
TrueRuleChain=T01_SetRejectCodeSyntaxCallDirection
TrueRuleChain=T02_SetRejectCodeSyntaxServiceDeliveryStartTimeStamp
TrueRuleChain=T03_SetRejectCodeSyntaxCauseForRecordClosing


[/S03FVNTas/03.CheckSyntax/03.CheckSyntaxOthers/01.01.SetRejectCodeSyntaxCallDirection]

AdornOps=set rejectCode SYN:FVN:CALL-DIRECTION
AdornOps=set rejectKey direction=
AdornOps=+ rejectKey direction rejectKey
ClassName=AdornmentRule


[/S03FVNTas/03.CheckSyntax/03.CheckSyntaxOthers/02.01.SetRejectCodeSyntaxServiceDeliveryStartTimeStamp]

AdornOps=set rejectCode SYN:FVN:SERVICE-DELIVERY-START-TIMESTAMP
AdornOps=set rejectKey serviceDeliveryStartTimeStampStr=
AdornOps=+ rejectKey serviceDeliveryStartTimeStampStr rejectKey
ClassName=AdornmentRule


[/S03FVNTas/03.CheckSyntax/03.CheckSyntaxOthers/03.01.SetRejectCodeSyntaxCauseForRecordClosing]

AdornOps=set rejectCode SYN:FVN:CAUSE-FOR-RECORD-CLOSING
AdornOps=set rejectKey causeForRecordClosing=
AdornOps=+ rejectKey causeForRecordClosing rejectKey
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields]

ClassName=RuleChain
RuleNames=01.SetCallingNumber
RuleNames=02.SetTypeTicket
RuleNames=03.SetNormANum
RuleNames=04.SetNormBNum
RuleNames=05.SetNormCNum
RuleNames=06.SetNormDuree
RuleNames=07.SetNormSensCDR
RuleNames=08.SetNormLocId
RuleNames=09.SetNormRecordId
RuleNames=10.SetNormResultatAppel
RuleNames=11.SetNormTypeOffre
RuleNames=12.SetNormServiceKeyInt
RuleNames=13.SetNormDateTime
RuleNames=14.NormalizeSemiColonsInNumbers


[/S03FVNTas/04.SetNormFields/01.SetCallingNumber]

ClassName=ConditionalRule
Conditions=involvedPartyTelUri,!=,NONE
FalseRuleChain=02.SetFromSipUri
TrueRuleChain=01.SetFromTelUri


[/S03FVNTas/04.SetNormFields/01.SetCallingNumber/01.SetFromTelUri]

AdornOps=copy involvedPartyTelUri callingNumber
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/01.SetCallingNumber/02.SetFromSipUri]

AdornOps=copy involvedPartySipUri callingNumber
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/02.SetTypeTicket]

ClassName=SwitchConditionRule
Conditions=direction,=,0
Conditions=direction,=,1
Conditions=direction,=,direction
Operations=None
T01_CheckServiceType=01.01.CheckServiceType
T02_SetTypeTicket3=02.01.SetTypeTicket3
T03_RejectTicket=03.01.RejectTicket
TrueRuleChain=T01_CheckServiceType
TrueRuleChain=T02_SetTypeTicket3
TrueRuleChain=T03_RejectTicket


[/S03FVNTas/04.SetNormFields/02.SetTypeTicket/01.01.CheckServiceType]

ClassName=ConditionalRule
Conditions=sSServiceType,=,5
FalseRuleChain=02.SetTypeTicket1
TrueRuleChain=01.SetTypeTicket5


[/S03FVNTas/04.SetNormFields/02.SetTypeTicket/01.01.CheckServiceType/01.SetTypeTicket5]

AdornOps=set Norm_TypeTicket 5
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/02.SetTypeTicket/01.01.CheckServiceType/02.SetTypeTicket1]

AdornOps=set Norm_TypeTicket 1
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/02.SetTypeTicket/02.01.SetTypeTicket3]

AdornOps=set Norm_TypeTicket 3
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/02.SetTypeTicket/03.01.RejectTicket]

AdornOps=set rejectCode SYN:FVN:TYPE-TICKET
AdornOps=set rejectKey direction=
AdornOps=+ rejectKey direction rejectKey
AdornOps=+ rejectKey ,sSServiceType= rejectKey
AdornOps=+ rejectKey sSServiceType rejectKey
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/03.SetNormANum]

ClassName=RuleChain
RuleNames=00.Init
RuleNames=01.Set
RuleNames=02.Normalize


[/S03FVNTas/04.SetNormFields/03.SetNormANum/00.Init]

AdornOps=set ANum ""
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/03.SetNormANum/01.Set]

ClassName=ConditionalRule
Conditions=Norm_TypeTicket,=,5
Conditions=associatedNumber,!=,NONE
Operations=and
FalseRuleChain=03.SetFromCallingNumber
TrueRuleChain=01.SetFromAssociatedNumber
TrueRuleChain=02.NormalizeNormANumOrigine


[/S03FVNTas/04.SetNormFields/03.SetNormANum/01.Set/01.SetFromAssociatedNumber]

AdornOps=copy associatedNumber ANum
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/03.SetNormANum/01.Set/02.NormalizeNormANumOrigine]

ClassName=RuleChain
RuleNames=01.ApplyRegEx
RuleNames=02.CheckMatch


[/S03FVNTas/04.SetNormFields/03.SetNormANum/01.Set/02.NormalizeNormANumOrigine/01.ApplyRegEx]

ClassName=PerlRegExStringRule
DestinationAttribute=auxStr1
DestinationAttribute=auxStr2
DestinationAttribute=Norm_ANumOrigine
DestinationAttribute=auxStr4
Operation=split
RegExPattern=^((?:tel|sip)(?:\:))?(\+|00)?(([a-eA-E][a-eA-E0-9]{3})?(\*)?[0-9]+)([*%_@;].*)?$
SourceAttribute=callingNumber


[/S03FVNTas/04.SetNormFields/03.SetNormANum/01.Set/02.NormalizeNormANumOrigine/02.CheckMatch]

ClassName=ConditionalRule
Conditions=Norm_ANumOrigine,=,""
TrueRuleChain=01.SetFromCallingNumber


[/S03FVNTas/04.SetNormFields/03.SetNormANum/01.Set/02.NormalizeNormANumOrigine/02.CheckMatch/01.SetFromCallingNumber]

AdornOps=copy callingNumber Norm_ANumOrigine
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/03.SetNormANum/01.Set/03.SetFromCallingNumber]

AdornOps=copy callingNumber ANum
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/03.SetNormANum/02.Normalize]

ClassName=RuleChain
RuleNames=01.ApplyRegEx
RuleNames=02.CheckMatch


[/S03FVNTas/04.SetNormFields/03.SetNormANum/02.Normalize/01.ApplyRegEx]

ClassName=PerlRegExStringRule
DestinationAttribute=auxStr1
DestinationAttribute=auxStr2
DestinationAttribute=Norm_ANum
DestinationAttribute=auxStr4
Operation=split
RegExPattern=^((?:tel|sip)(?:\:))?(\+|00)?(([a-eA-E][a-eA-E0-9]{3})?(\*)?[0-9]+)([*%_@;].*)?$
SourceAttribute=ANum


[/S03FVNTas/04.SetNormFields/03.SetNormANum/02.Normalize/02.CheckMatch]

ClassName=ConditionalRule
Conditions=Norm_ANum,=,""
TrueRuleChain=01.CopyFromANum


[/S03FVNTas/04.SetNormFields/03.SetNormANum/02.Normalize/02.CheckMatch/01.CopyFromANum]

AdornOps=copy ANum Norm_ANum
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/04.SetNormBNum]

ClassName=RuleChain
RuleNames=00.Init
RuleNames=01.Set
RuleNames=02.Normalize


[/S03FVNTas/04.SetNormFields/04.SetNormBNum/00.Init]

AdornOps=set BNum NONE
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/04.SetNormBNum/01.Set]

ClassName=ConditionalRule
Conditions=Norm_TypeTicket,=,5
FalseRuleChain=01.CheckCalledParty
FalseRuleChain=03.CheckBNum
TrueRuleChain=01.CheckCalledParty
TrueRuleChain=02.CheckRequestedParty
TrueRuleChain=03.CheckBNum


[/S03FVNTas/04.SetNormFields/04.SetNormBNum/01.Set/01.CheckCalledParty]

ClassName=SwitchConditionRule
Conditions=calledPartyTelUri,!=,NONE
Conditions=calledPartySipUri,!=,NONE
Operations=None
T01_SetFromTelUri=01.01.SetFromTelUri
T02_SetFromSipUri=02.01.SetFromSipUri
TrueRuleChain=T01_SetFromTelUri
TrueRuleChain=T02_SetFromSipUri


[/S03FVNTas/04.SetNormFields/04.SetNormBNum/01.Set/01.CheckCalledParty/01.01.SetFromTelUri]

AdornOps=copy calledPartyTelUri BNum
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/04.SetNormBNum/01.Set/01.CheckCalledParty/02.01.SetFromSipUri]

AdornOps=copy calledPartySipUri BNum
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/04.SetNormBNum/01.Set/02.CheckRequestedParty]

ClassName=SwitchConditionRule
Conditions=requestedPartyTelUri,!=,NONE
Conditions=requestedPartySipUri,!=,NONE
Operations=None
T01_SetFromTelUri=01.01.SetFromTelUri
T02_SetFromSipUri=02.01.SetFromSipUri
TrueRuleChain=T01_SetFromTelUri
TrueRuleChain=T02_SetFromSipUri


[/S03FVNTas/04.SetNormFields/04.SetNormBNum/01.Set/02.CheckRequestedParty/01.01.SetFromTelUri]

AdornOps=copy requestedPartyTelUri BNum
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/04.SetNormBNum/01.Set/02.CheckRequestedParty/02.01.SetFromSipUri]

AdornOps=copy requestedPartySipUri BNum
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/04.SetNormBNum/01.Set/03.CheckBNum]

ClassName=ConditionalRule
Conditions=BNum,=,NONE
TrueRuleChain=01.SetRejectCodeSyntaxBNum


[/S03FVNTas/04.SetNormFields/04.SetNormBNum/01.Set/03.CheckBNum/01.SetRejectCodeSyntaxBNum]

AdornOps=set flagFVNPassed 0
AdornOps=set rejectCode SYN:FVN:CALLED-PARTY
AdornOps=set rejectKey calledPartyTelUri=
AdornOps=+ rejectKey calledPartyTelUri rejectKey
AdornOps=+ rejectKey ,calledPartySipUri= rejectKey
AdornOps=+ rejectKey calledPartySipUri rejectKey
AdornOps=+ rejectKey ,requestedPartyTelUri= rejectKey
AdornOps=+ rejectKey requestedPartyTelUri rejectKey
AdornOps=+ rejectKey ,requestedPartySipUri= rejectKey
AdornOps=+ rejectKey requestedPartySipUri rejectKey
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/04.SetNormBNum/02.Normalize]

ClassName=RuleChain
RuleNames=01.ApplyRegEx
RuleNames=02.CheckMatch


[/S03FVNTas/04.SetNormFields/04.SetNormBNum/02.Normalize/01.ApplyRegEx]

ClassName=PerlRegExStringRule
DestinationAttribute=auxStr1
DestinationAttribute=auxStr2
DestinationAttribute=Norm_BNum
DestinationAttribute=auxStr4
Operation=split
RegExPattern=^((?:tel|sip)(?:\:))?(\+|00)?(([a-eA-E][a-eA-E0-9]{3})?(\*)?[0-9]+)([*%_@;].*)?$
SourceAttribute=BNum


[/S03FVNTas/04.SetNormFields/04.SetNormBNum/02.Normalize/02.CheckMatch]

ClassName=ConditionalRule
Conditions=Norm_BNum,=,""
TrueRuleChain=01.CopyFromBNum


[/S03FVNTas/04.SetNormFields/04.SetNormBNum/02.Normalize/02.CheckMatch/01.CopyFromBNum]

AdornOps=copy BNum Norm_BNum
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/05.SetNormCNum]

ClassName=RuleChain
RuleNames=00.Init
RuleNames=01.Set
RuleNames=02.Normalize


[/S03FVNTas/04.SetNormFields/05.SetNormCNum/00.Init]

AdornOps=set CNum ""
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/05.SetNormCNum/01.Set]

ClassName=SwitchConditionRule
Conditions=requestedPartyTelUri,!=,NONE
Conditions=requestedPartySipUri,!=,NONE
Operations=None
T01_SetFromTelUri=01.01.SetFromTelUri
T02_SetFromSipUri=02.01.SetFromSipUri
TrueRuleChain=T01_SetFromTelUri
TrueRuleChain=T02_SetFromSipUri


[/S03FVNTas/04.SetNormFields/05.SetNormCNum/01.Set/01.01.SetFromTelUri]

AdornOps=copy requestedPartyTelUri CNum
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/05.SetNormCNum/01.Set/02.01.SetFromSipUri]

AdornOps=copy requestedPartySipUri CNum
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/05.SetNormCNum/02.SetNormCNum]

AdornOps=copy CNum Norm_CNum
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/05.SetNormCNum/02.Normalize]

ClassName=RuleChain
RuleNames=01.ApplyRegEx
RuleNames=02.CheckMatch


[/S03FVNTas/04.SetNormFields/05.SetNormCNum/02.Normalize/01.ApplyRegEx]

ClassName=PerlRegExStringRule
DestinationAttribute=auxStr1
DestinationAttribute=auxStr2
DestinationAttribute=Norm_CNum
DestinationAttribute=auxStr4
Operation=split
RegExPattern=^((?:tel|sip)(?:\:))?(\+|00)?(([a-eA-E][a-eA-E0-9]{3})?(\*)?[0-9]+)([*%_@;].*)?$
SourceAttribute=CNum


[/S03FVNTas/04.SetNormFields/05.SetNormCNum/02.Normalize/02.CheckMatch]

ClassName=ConditionalRule
Conditions=Norm_CNum,=,""
TrueRuleChain=01.CopyFromCNum


[/S03FVNTas/04.SetNormFields/05.SetNormCNum/02.Normalize/02.CheckMatch/01.CopyFromCNum]

AdornOps=copy CNum Norm_CNum
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/06.SetNormDuree]

ClassName=ConditionalRule
Conditions=serviceDeliveryEndTimeStampStr,!=,NONE
FalseRuleChain=02.SetDuree0
TrueRuleChain=00.Init
TrueRuleChain=01.ComputeDiff


[/S03FVNTas/04.SetNormFields/06.SetNormDuree/00.Init]

ClassName=TimeAdornmentRule
ParseTimeString=serviceDeliveryStartTimeStampStr,serviceDeliveryStartTimeStampTime,yyyyMMddHHmmss
ParseTimeString=serviceDeliveryEndTimeStampStr,serviceDeliveryEndTimeStampTime,yyyyMMddHHmmss
TimeZone=GMT


[/S03FVNTas/04.SetNormFields/06.SetNormDuree/01.ComputeDiff]


AdornOps=- serviceDeliveryEndTimeStampTime serviceDeliveryStartTimeStampTime Norm_Duree
AdornOps=* Norm_Duree 10 Norm_Duree
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/06.SetNormDuree/02.SetDuree0]

AdornOps=set Norm_Duree 0
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/07.SetNormSensCDR]

ClassName=ConditionalRule
Conditions=direction,=,0
FalseRuleChain=02.SetletterE
TrueRuleChain=01.SetletterS


[/S03FVNTas/04.SetNormFields/07.SetNormSensCDR/01.SetletterS]

AdornOps=set Norm_SensCDR S
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/07.SetNormSensCDR/02.SetletterE]

AdornOps=set Norm_SensCDR E
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/08.SetNormLocId]

ClassName=ConditionalRule
Conditions=accessNetworkInformationStr,!=,NONE
TrueRuleChain=01.Split
TrueRuleChain=02.CheckaccessNetworkInformation


[/S03FVNTas/04.SetNormFields/08.SetNormLocId/01.Split]

ClassName=PerlRegExStringRule
DestinationAttribute=accessNetworkInformationOPStr
DestinationAttribute=accessNetworkInformationCPStr
Operation=split
RegExPattern=.*;OP-([0-9]*);CP-([0-9]*);.*
SourceAttribute=accessNetworkInformationStr


[/S03FVNTas/04.SetNormFields/08.SetNormLocId/02.CheckaccessNetworkInformation]

ClassName=ConditionalRule
Conditions=accessNetworkInformationOPStr,!=,""
Conditions=accessNetworkInformationCPStr,!=,""
Operations=and
TrueRuleChain=01.Build


[/S03FVNTas/04.SetNormFields/08.SetNormLocId/02.CheckaccessNetworkInformation/01.Build]

AdornOps=copy accessNetworkInformationOPStr Norm_LocId
AdornOps=+ Norm_LocId 00 Norm_LocId
AdornOps=+ Norm_LocId accessNetworkInformationCPStr Norm_LocId
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/09.SetNormRecordId]

AdornOps=copy localRecordSequenceNumber Norm_RecordId
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/10.SetNormResultatAppel]

ClassName=ConditionalRule
Conditions=causeForRecordClosing,!=,NONE
TrueRuleChain=01.Set


[/S03FVNTas/04.SetNormFields/10.SetNormResultatAppel/01.Set]

AdornOps=copy causeForRecordClosing Norm_ResultatAppel
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/11.SetNormTypeOffre]

ClassName=RuleChain
RuleNames=00.Init
RuleNames=01.SetCodeOffre
RuleNames=02.SetNormTypeOffre


[/S03FVNTas/04.SetNormFields/11.SetNormTypeOffre/00.Init]

AdornOps=set codeOffre NONE
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/11.SetNormTypeOffre/01.SetCodeOffre]

ClassName=SwitchConditionRule
Conditions=callingPartyNumberWholesaleId,!=,NONE
Conditions=calledPartyNumberWholesaleId,!=,NONE
Operations=None
T01_SetFromCalling=01.01.SetFromCalling
T02_SetFromCalled=02.01.SetFromCalled
TrueRuleChain=T01_SetFromCalling
TrueRuleChain=T02_SetFromCalled


[/S03FVNTas/04.SetNormFields/11.SetNormTypeOffre/01.SetCodeOffre/01.01.SetFromCalling]

AdornOps=copy callingPartyNumberWholesaleId codeOffre
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/11.SetNormTypeOffre/01.SetCodeOffre/02.01.SetFromCalled]

AdornOps=copy calledPartyNumberWholesaleId codeOffre
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/11.SetNormTypeOffre/02.SetNormTypeOffre]

ClassName=ConditionalRule
Conditions=codeOffre,!within,[NONE,""]
FalseRuleChain=02.SetTypeOffreKo
TrueRuleChain=00.Init
TrueRuleChain=01.QueryTypeOffre


[/S03FVNTas/04.SetNormFields/11.SetNormTypeOffre/02.SetNormTypeOffre/00.Init]

AdornOps=set Norm_TypeOffre ""
AdornOps=lower codeOffre codeOffreLowcase
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/11.SetNormTypeOffre/02.SetNormTypeOffre/01.QueryTypeOffre]

ClassName=com.hp.usage.decisiontable.DecisionTableRule
InputParameterMapping=typeSwitch,Norm_TypeSwitch
InputParameterMapping=codeOffre,codeOffreLowcase
Name=FIX__REF_MED_TYPE_OFFRE
NoMatchRule=NoMatchRule
OutputParameterMapping=typeOffre,Norm_TypeOffre


[/S03FVNTas/04.SetNormFields/11.SetNormTypeOffre/02.SetNormTypeOffre/01.QueryTypeOffre/NoMatchRule]

AdornOps=copy codeOffre Norm_CodeOffre
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/11.SetNormTypeOffre/02.SetNormTypeOffre/02.SetTypeOffreKo]

AdornOps=set Norm_TypeOffre <ko>
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/12.SetNormServiceKeyInt]

ClassName=ConditionalRule
Conditions=codeOffre,!within,[NONE,""]
TrueRuleChain=01.SetFromCodeOffre


[/S03FVNTas/04.SetNormFields/12.SetNormServiceKeyInt/01.SetFromCodeOffre]

AdornOps=copy codeOffre Norm_ServiceKeyInt
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/13.SetNormDateTime]

ClassName=ConditionalRule
Conditions=serviceDeliveryStartTimeStampStr,!=,NONE
FalseRuleChain=03.Log
TrueRuleChain=00.Log
TrueRuleChain=01.SetFromServiceDeliveryStartTimeStamp
TrueRuleChain=02.Log


[/S03FVNTas/04.SetNormFields/13.SetNormDateTime/00.Log]

Attributes=serviceDeliveryStartTimeStampStr
Attributes=Norm_DateTime
ClassName=LogNMERule
LogLevel=DEBUG
Message=>>>> S03FVNTas/05.SetNormFields/15.SetNormDateTime/00.Log :
NullAlso=true


[/S03FVNTas/04.SetNormFields/13.SetNormDateTime/02.Log]

Attributes=serviceDeliveryStartTimeStampStr
Attributes=Norm_DateTime
ClassName=LogNMERule
LogLevel=DEBUG
Message=>>>> S03FVNTas/05.SetNormFields/15.SetNormDateTime/02.Log :
NullAlso=true


[/S03FVNTas/04.SetNormFields/13.SetNormDateTime/03.Log]

Attributes=serviceDeliveryStartTimeStampStr
Attributes=Norm_DateTime
ClassName=LogNMERule
LogLevel=DEBUG
Message=>>>> S03FVNTas/05.SetNormFields/15.SetNormDateTime/03.Log :
NullAlso=true


[/S03FVNTas/04.SetNormFields/13.SetNormDateTime/01.SetFromServiceDeliveryStartTimeStamp]

AdornOps=copy serviceDeliveryStartTimeStampStr Norm_DateTime
ClassName=AdornmentRule


[/S03FVNTas/04.SetNormFields/14.NormalizeSemiColonsInNumbers]

AdornOps=replace ";" "_" Norm_ANum Norm_ANum
AdornOps=replace ";" "_" Norm_BNum Norm_BNum
AdornOps=replace ";" "_" Norm_CNum Norm_CNum
ClassName=AdornmentRule


[/S03FVNTas/05.ApplyFiltering]

ClassName=ConditionalRule
Conditions=rejectCode,!=,NONE
Conditions=causeForRecordClosing,!=,0
Conditions=Norm_Duree,=,0
Operations=or,or
TrueRuleChain=01.SetFlagFVNPassed0


[/S03FVNTas/05.ApplyFiltering/01.SetFlagFVNPassed0]

AdornOps=set flagFVNPassed 0
ClassName=AdornmentRule


[/S03FVNTas/98.Log]

ClassName=LogNMERule
LogLevel=DEBUG
Message=>>>> S03FVNTas/98.Log :
NullAlso=false


[/S03FVNTas/99.Store]

ClassName=StoreRule
LinkBundle=ims/attributes/common/normalizedformat


[/S04FVNEcscf]

ClassName=AggregationScheme
RuleNames=00.FilterEcscf
RuleNames=01.Init
RuleNames=02.Stats
RuleNames=02b.Log
RuleNames=03.CheckSyntax
RuleNames=04.SetNormFields
RuleNames=05.ApplyFiltering
RuleNames=98.Log
RuleNames=99.Store


[/S04FVNEcscf/00.FilterEcscf]

ClassName=FilterRule
Conditions=Norm_TypeSwitch,=,ecscf
OnMatch=keep


[/S04FVNEcscf/01.Init]

AdornOps=set flagParse 0
AdornOps=set flagFVN 1
AdornOps=set flagInfocentre 1
AdornOps=set flagTedh 0
AdornOps=set flagFVNPassed 0
AdornOps=set flagArborGp 0
AdornOps=set flagArborOpe 0
AdornOps=set flagDiwa 0
AdornOps=set flagEntFixe 0
AdornOps=set flagEntMobile 0
AdornOps=set flagNone 0
AdornOps=set flagSap 0
AdornOps=set flagSi800 0
AdornOps=set flagSioFixe 0
AdornOps=set flagSioMobile 0
AdornOps=set flagSioMobileIn 0
AdornOps=set flagSioMobileOut 0
AdornOps=set flagTca 0
AdornOps=set rejectCode NONE
AdornOps=set serviceDeliveryEndTimeStampTime 0
AdornOps=set serviceDeliveryStartTimeStampTime 0
AdornOps=set Norm_ANum ""
AdornOps=set Norm_ANumOrigine ""
AdornOps=set Norm_ANumNature 0
AdornOps=set Norm_ANumNetworkPrefix ""
AdornOps=set Norm_ANumPortaPrefix ""
AdornOps=set Norm_AttestationInfo ""
AdornOps=set Norm_BNum ""
AdornOps=set Norm_BNumNature 0
AdornOps=set Norm_BNumNetworkPrefix ""
AdornOps=set Norm_BNumPortaPrefix ""
AdornOps=set Norm_BillClassOp ""
AdornOps=set Norm_CNum ""
AdornOps=set Norm_CNumNature 0
AdornOps=set Norm_CNumNetworkPrefix ""
AdornOps=set Norm_CNumPortaPrefix ""
AdornOps=set Norm_CategorieRSVA ""
AdornOps=set Norm_CodeOffre ""
AdornOps=set Norm_CodePrix ""
AdornOps=set Norm_DateTime ""
AdornOps=set Norm_DurFranchiseHp 0
AdornOps=set Norm_Duree 0
AdornOps=set Norm_IdentityBypass ""
AdornOps=set Norm_IdentityBypassToken ""
AdornOps=set Norm_IdentityUrl ""
AdornOps=set Norm_IndexSchemaErreur 0
AdornOps=set Norm_LocId ""
AdornOps=set Norm_NDS ""
AdornOps=set Norm_NDSNature 0
AdornOps=set Norm_OpeSva ""
AdornOps=set Norm_OriginationSPID ""
AdornOps=set Norm_OrigInt 0
AdornOps=set Norm_ANumOrigineNature 0
AdornOps=set Norm_Prefixe ""
AdornOps=set Norm_ReasonCode ""
AdornOps=set Norm_ReasonText ""
AdornOps=set Norm_RecordId 0
AdornOps=set Norm_Res01 ""
AdornOps=set Norm_Res02 ""
AdornOps=set Norm_Res03 ""
AdornOps=set Norm_Res04 ""
AdornOps=set Norm_Res05 ""
AdornOps=set Norm_Res06 ""
AdornOps=set Norm_Res07 ""
AdornOps=set Norm_Res08 ""
AdornOps=set Norm_Res09 ""
AdornOps=set Norm_Res10 ""
AdornOps=set Norm_ResultatAppel ""
AdornOps=set Norm_SensCDR S
AdornOps=set Norm_ServiceKeyInt ""
AdornOps=lower switchId Norm_SwitchIdFromFilename
AdornOps=set Norm_SwitchIdOut IMS
AdornOps=set Norm_Sysfact ""
AdornOps=set Norm_TaxationArriere ""
AdornOps=set Norm_TpsAttente 0
AdornOps=set Norm_TrunkIN IMSE
AdornOps=set Norm_TrunkOUT IMSS
AdornOps=set Norm_TypeAcces ""
AdornOps=set Norm_TypeOffre n/a
AdornOps=set Norm_TypeService ""
AdornOps=set Norm_TypeTicket 1
AdornOps=set Norm_TypeTrunkIN ""
AdornOps=set Norm_TypeTrunkOUT ""
AdornOps=set Norm_TypeUsageEnt ""
AdornOps=set Norm_UT 0
AdornOps=set Norm_VerstatValue ""
AdornOps=set Norm_IntercoIN 0
AdornOps=set Norm_IntercoOUT 0
AdornOps=set Norm_Valo ""
AdornOps=set Norm_PortabiliteSpec ""
AdornOps=set Norm_BillClassGp ""
AdornOps=set Norm_SensSIO 0
AdornOps=set schemeName S04FVNEcscf
ClassName=AdornmentRule


[/S04FVNEcscf/02.Stats]

ClassName=com.hp.usage.collector.rules.UsageParametersRule
Set=ParsingModule
Operations=inc,decodedTickets
UsageParametersFile=file:///var/opt/bits/App/stats/fixe/Fixe_Statistics.config


[/S04FVNEcscf/02b.Log]

ClassName=LogNMERule
LogLevel=DEBUG
Message=>>>> S04FVNEcscf/02b.Log :
NullAlso=false


[/S04FVNEcscf/03.CheckSyntax]

ClassName=RuleChain
RuleNames=01.CheckSyntaxInvolvedParty
RuleNames=02.CheckSyntaxCalledParty
RuleNames=03.CheckSyntaxRequestedParty
RuleNames=04.CheckSyntaxOthers


[/S04FVNEcscf/03.CheckSyntax/01.CheckSyntaxInvolvedParty]

ClassName=ConditionalRule
Conditions=involvedPartyTelUri,=,NONE
Conditions=involvedPartySipUri,=,NONE
Operations=and
TrueRuleChain=01.SetRejectCodeSyntaxInvolvedParty


[/S04FVNEcscf/03.CheckSyntax/01.CheckSyntaxInvolvedParty/01.SetRejectCodeSyntaxInvolvedParty]

AdornOps=set rejectCode SYN:FVN:INVOLVED-PARTY
AdornOps=set rejectKey involvedPartyTelUri=
AdornOps=+ rejectKey involvedPartyTelUri rejectKey
AdornOps=+ rejectKey ,involvedPartySipUri= rejectKey
AdornOps=+ rejectKey involvedPartySipUri rejectKey
ClassName=AdornmentRule


[/S04FVNEcscf/03.CheckSyntax/02.CheckSyntaxCalledParty]

ClassName=ConditionalRule
Conditions=calledPartyTelUri,=,NONE
Conditions=calledPartySipUri,=,NONE
Operations=and
TrueRuleChain=01.SetRejectCodeSyntaxCalledParty


[/S04FVNEcscf/03.CheckSyntax/02.CheckSyntaxCalledParty/01.SetRejectCodeSyntaxCalledParty]

AdornOps=set rejectCode SYN:FVN:CALLED-PARTY
AdornOps=set rejectKey calledPartyTelUri=
AdornOps=+ rejectKey calledPartyTelUri rejectKey
AdornOps=+ rejectKey ,calledPartySipUri= rejectKey
AdornOps=+ rejectKey calledPartySipUri rejectKey
ClassName=AdornmentRule


[/S04FVNEcscf/03.CheckSyntax/03.CheckSyntaxRequestedParty]
ClassName=ConditionalRule
Conditions=requestedPartyTelUri,=,NONE
Conditions=requestedPartySipUri,=,NONE
Operations=and
TrueRuleChain=01.SetRejectCodeSyntaxRequestedParty


[/S04FVNEcscf/03.CheckSyntax/03.CheckSyntaxRequestedParty/01.SetRejectCodeSyntaxRequestedParty]

AdornOps=set rejectCode SYN:FVN:REQUESTED-PARTY
AdornOps=set rejectKey requestedPartyTelUri=
AdornOps=+ rejectKey requestedPartyTelUri rejectKey
AdornOps=+ rejectKey ,requestedPartySipUri= rejectKey
AdornOps=+ rejectKey requestedPartySipUri rejectKey
ClassName=AdornmentRule


[/S04FVNEcscf/03.CheckSyntax/04.CheckSyntaxOthers]

ClassName=SwitchConditionRule
Conditions=serviceDeliveryStartTimeStampStr,=,NONE
Conditions=causeForRecordClosing,=,NONE
Operations=None
T01_SetRejectCodeSyntaxServiceDeliveryStartTimeStamp=01.01.SetRejectCodeSyntaxServiceDeliveryStartTimeStamp
T02_SetRejectCodeSyntaxCauseForRecordClosing=02.01.SetRejectCodeSyntaxCauseForRecordClosing
TrueRuleChain=T01_SetRejectCodeSyntaxServiceDeliveryStartTimeStamp
TrueRuleChain=T02_SetRejectCodeSyntaxCauseForRecordClosing


[/S04FVNEcscf/03.CheckSyntax/04.CheckSyntaxOthers/01.01.SetRejectCodeSyntaxServiceDeliveryStartTimeStamp]

AdornOps=set rejectCode SYN:FVN:SERVICE-DELIVERY-START-TIMESTAMP
AdornOps=set rejectKey serviceDeliveryStartTimeStampStr=
AdornOps=+ rejectKey serviceDeliveryStartTimeStampStr rejectKey
ClassName=AdornmentRule


[/S04FVNEcscf/03.CheckSyntax/04.CheckSyntaxOthers/02.01.SetRejectCodeSyntaxCauseForRecordClosing]

AdornOps=set rejectCode SYN:FVN:CAUSE-FOR-RECORD-CLOSING
AdornOps=set rejectKey causeForRecordClosing=
AdornOps=+ rejectKey causeForRecordClosing rejectKey
ClassName=AdornmentRule


[/S04FVNEcscf/04.SetNormFields]

ClassName=RuleChain
RuleNames=01.SetNormANum
RuleNames=02.SetNormBNum
RuleNames=03.SetNormCNum
RuleNames=04.SetNormDuree
RuleNames=05.SetNormLocId
RuleNames=06.SetNormRecordId
RuleNames=07.SetNormResultatAppel
RuleNames=08.SetNormDateTime
RuleNames=09.NormalizeSemiColonsInNumbers
RuleNames=10.SetNormNDS


[/S04FVNEcscf/04.SetNormFields/01.SetNormANum]

ClassName=ConditionalRule
Conditions=involvedPartyTelUri,!=,NONE
FalseRuleChain=02.SetFromSipUri
FalseRuleChain=03.Normalize
TrueRuleChain=01.SetFromTelUri
TrueRuleChain=03.Normalize


[/S04FVNEcscf/04.SetNormFields/01.SetNormANum/01.SetFromTelUri]

AdornOps=copy involvedPartyTelUri ANum
ClassName=AdornmentRule


[/S04FVNEcscf/04.SetNormFields/01.SetNormANum/02.SetFromSipUri]

AdornOps=copy involvedPartySipUri ANum
ClassName=AdornmentRule


[/S04FVNEcscf/04.SetNormFields/01.SetNormANum/03.Normalize]

ClassName=RuleChain
RuleNames=01.ApplyRegEx
RuleNames=02.CheckMatch


[/S04FVNEcscf/04.SetNormFields/01.SetNormANum/03.Normalize/01.ApplyRegEx]

ClassName=PerlRegExStringRule
DestinationAttribute=auxStr1
DestinationAttribute=auxStr2
DestinationAttribute=Norm_ANum
DestinationAttribute=auxStr4
Operation=split
RegExPattern=^((?:tel|sip)(?:\:))?(\+|00)?(([a-eA-E][a-eA-E0-9]{3})?(\*)?[0-9]+)([*%_@;].*)?$
SourceAttribute=ANum


[/S04FVNEcscf/04.SetNormFields/01.SetNormANum/03.Normalize/02.CheckMatch]

ClassName=ConditionalRule
Conditions=Norm_ANum,=,""
TrueRuleChain=01.CopyFromANum


[/S04FVNEcscf/04.SetNormFields/01.SetNormANum/03.Normalize/02.CheckMatch/01.CopyFromANum]

AdornOps=copy ANum Norm_ANum
ClassName=AdornmentRule


[/S04FVNEcscf/04.SetNormFields/02.SetNormBNum]

ClassName=ConditionalRule
Conditions=requestedPartyTelUri,!=,NONE
FalseRuleChain=02.SetFromSipUri
FalseRuleChain=03.Normalize
TrueRuleChain=01.SetFromTelUri
TrueRuleChain=03.Normalize


[/S04FVNEcscf/04.SetNormFields/02.SetNormBNum/01.SetFromTelUri]

AdornOps=copy requestedPartyTelUri BNum
ClassName=AdornmentRule


[/S04FVNEcscf/04.SetNormFields/02.SetNormBNum/02.SetFromSipUri]

AdornOps=copy requestedPartySipUri BNum
ClassName=AdornmentRule


[/S04FVNEcscf/04.SetNormFields/02.SetNormBNum/03.Normalize]

ClassName=RuleChain
RuleNames=01.ApplyRegEx
RuleNames=02.CheckMatch


[/S04FVNEcscf/04.SetNormFields/02.SetNormBNum/03.Normalize/01.ApplyRegEx]

ClassName=PerlRegExStringRule
DestinationAttribute=auxStr1
DestinationAttribute=auxStr2
DestinationAttribute=Norm_BNum
DestinationAttribute=auxStr4
Operation=split
RegExPattern=^((?:tel|sip)(?:\:))?(\+|00)?(([a-eA-E][a-eA-E0-9]{3})?(\*)?[0-9]+)([*%_@;].*)?$
SourceAttribute=BNum


[/S04FVNEcscf/04.SetNormFields/02.SetNormBNum/03.Normalize/02.CheckMatch]

ClassName=ConditionalRule
Conditions=Norm_BNum,=,""
TrueRuleChain=01.CopyFromBNum


[/S04FVNEcscf/04.SetNormFields/02.SetNormBNum/03.Normalize/02.CheckMatch/01.CopyFromBNum]

AdornOps=copy BNum Norm_BNum
ClassName=AdornmentRule


[/S04FVNEcscf/04.SetNormFields/03.SetNormCNum]

ClassName=ConditionalRule
Conditions=calledPartyTelUri,!=,NONE
FalseRuleChain=02.SetFromSipUri
FalseRuleChain=03.Normalize
TrueRuleChain=01.SetFromTelUri
TrueRuleChain=03.Normalize


[/S04FVNEcscf/04.SetNormFields/03.SetNormCNum/01.SetFromTelUri]

AdornOps=copy calledPartyTelUri CNum
ClassName=AdornmentRule


[/S04FVNEcscf/04.SetNormFields/03.SetNormCNum/02.SetFromSipUri]

AdornOps=copy calledPartySipUri CNum
ClassName=AdornmentRule


[/S04FVNEcscf/04.SetNormFields/03.SetNormCNum/03.Normalize]

ClassName=RuleChain
RuleNames=01.ApplyRegEx
RuleNames=02.CheckMatch


[/S04FVNEcscf/04.SetNormFields/03.SetNormCNum/03.Normalize/01.ApplyRegEx]

ClassName=PerlRegExStringRule
DestinationAttribute=auxStr1
DestinationAttribute=auxStr2
DestinationAttribute=Norm_CNum
DestinationAttribute=auxStr4
Operation=split
RegExPattern=^((?:tel|sip)(?:\:))?(\+|00)?(([a-eA-E][a-eA-E0-9]{3})?(\*)?[0-9]+)([*%_@;].*)?$
SourceAttribute=CNum


[/S04FVNEcscf/04.SetNormFields/03.SetNormCNum/03.Normalize/02.CheckMatch]

ClassName=ConditionalRule
Conditions=Norm_CNum,=,""
TrueRuleChain=01.CopyFromCNum


[/S04FVNEcscf/04.SetNormFields/03.SetNormCNum/03.Normalize/02.CheckMatch/01.CopyFromCNum]

AdornOps=copy CNum Norm_CNum
ClassName=AdornmentRule


[/S04FVNEcscf/04.SetNormFields/04.SetNormDuree]

ClassName=ConditionalRule
Conditions=serviceDeliveryEndTimeStampStr,!=,NONE
FalseRuleChain=02.SetDuree0
TrueRuleChain=00.Init
TrueRuleChain=01.ComputeDiff


[/S04FVNEcscf/04.SetNormFields/04.SetNormDuree/00.Init]

ClassName=TimeAdornmentRule
ParseTimeString=serviceDeliveryStartTimeStampStr,serviceDeliveryStartTimeStampTime,yyyyMMddHHmmss
ParseTimeString=serviceDeliveryEndTimeStampStr,serviceDeliveryEndTimeStampTime,yyyyMMddHHmmss
TimeZone=GMT


[/S04FVNEcscf/04.SetNormFields/04.SetNormDuree/01.ComputeDiff]

AdornOps=- serviceDeliveryEndTimeStampTime serviceDeliveryStartTimeStampTime Norm_Duree
AdornOps=* Norm_Duree 10 Norm_Duree
ClassName=AdornmentRule


[/S04FVNEcscf/04.SetNormFields/04.SetNormDuree/02.SetDuree0]

AdornOps=set Norm_Duree 0
ClassName=AdornmentRule


[/S04FVNEcscf/04.SetNormFields/05.SetNormLocId]

ClassName=ConditionalRule
Conditions=accessNetworkInformationStr,!=,NONE
TrueRuleChain=01.Split
TrueRuleChain=02.CheckaccessNetworkInformation


[/S04FVNEcscf/04.SetNormFields/05.SetNormLocId/01.Split]

ClassName=PerlRegExStringRule
DestinationAttribute=accessNetworkInformationOPStr
DestinationAttribute=accessNetworkInformationCPStr
Operation=split
RegExPattern=.*;OP-([0-9]*);CP-([0-9]*);.*
SourceAttribute=accessNetworkInformationStr


[/S04FVNEcscf/04.SetNormFields/05.SetNormLocId/02.CheckaccessNetworkInformation]

ClassName=ConditionalRule
Conditions=accessNetworkInformationOPStr,!=,""
Conditions=accessNetworkInformationCPStr,!=,""
Operations=and
TrueRuleChain=01.Build


[/S04FVNEcscf/04.SetNormFields/05.SetNormLocId/02.CheckaccessNetworkInformation/01.Build]

AdornOps=copy accessNetworkInformationOPStr Norm_LocId
AdornOps=+ Norm_LocId 00 Norm_LocId
AdornOps=+ Norm_LocId accessNetworkInformationCPStr Norm_LocId
ClassName=AdornmentRule


[/S04FVNEcscf/04.SetNormFields/06.SetNormRecordId]

AdornOps=copy localRecordSequenceNumber Norm_RecordId
ClassName=AdornmentRule


[/S04FVNEcscf/04.SetNormFields/07.SetNormResultatAppel]

ClassName=ConditionalRule
Conditions=causeForRecordClosing,!=,NONE
TrueRuleChain=01.Set


[/S04FVNEcscf/04.SetNormFields/07.SetNormResultatAppel/01.Set]

AdornOps=copy causeForRecordClosing Norm_ResultatAppel
ClassName=AdornmentRule


[/S04FVNEcscf/04.SetNormFields/08.SetNormDateTime]

ClassName=ConditionalRule
Conditions=serviceDeliveryStartTimeStampStr,!=,NONE
TrueRuleChain=01.SetFromServiceDeliveryStartTimeStamp


[/S04FVNEcscf/04.SetNormFields/08.SetNormDateTime/01.SetFromServiceDeliveryStartTimeStamp]

AdornOps=copy serviceDeliveryStartTimeStampStr Norm_DateTime
ClassName=AdornmentRule


[/S04FVNEcscf/04.SetNormFields/09.NormalizeSemiColonsInNumbers]

AdornOps=replace ";" "_" Norm_ANum Norm_ANum
AdornOps=replace ";" "_" Norm_BNum Norm_BNum
AdornOps=replace ";" "_" Norm_CNum Norm_CNum
ClassName=AdornmentRule


[/S04FVNEcscf/04.SetNormFields/10.SetNormNDS]

AdornOps=copy Norm_ANum Norm_NDS
ClassName=AdornmentRule


[/S04FVNEcscf/05.ApplyFiltering]

ClassName=ConditionalRule
Conditions=Norm_Duree,=,0
TrueRuleChain=01.SetFlagFVNPassed0


[/S04FVNEcscf/05.ApplyFiltering/01.SetFlagFVNPassed0]

AdornOps=set flagFVNPassed 0
ClassName=AdornmentRule


[/S04FVNEcscf/98.Log]

ClassName=LogNMERule
LogLevel=DEBUG
Message=>>>> S04FVNEcscf/98.Log :
NullAlso=false


[/S04FVNEcscf/99.Store]

ClassName=StoreRule
LinkBundle=ims/attributes/common/normalizedformat


[/S05Rejected]

ClassName=AggregationScheme
RuleNames=00.FilterTickets
RuleNames=01.Init
RuleNames=02.Stats
RuleNames=02b.Log
RuleNames=99.Store


[/S05Rejected/00.FilterTickets]

ClassName=FilterRule
Conditions=rejectCode,!=,NONE
OnMatch=keep


[/S05Rejected/01.Init]

AdornOps=set flagParse 0
AdornOps=set flagFVN 0
AdornOps=set flagFVNPassed 0
AdornOps=copy rejectCode Norm_CodeErreur
AdornOps=copy rejectKey Norm_DonneesErreur
AdornOps=set schemeName S05Rejected
ClassName=AdornmentRule


[/S05Rejected/02.Stats]

ClassName=ConditionalRule
Conditions=Norm_TypeSwitch,=,tas
TrueRuleChain=01.SetRejectedTas
FalseRuleChain=02.SetRejectedEcscf


[/S05Rejected/02b.Log]

ClassName=LogNMERule
LogLevel=DEBUG
Message=>>>> S05Rejected/02b.Log :
NullAlso=false


[/S05Rejected/02.Stats/01.SetRejectedTas]

ClassName=com.hp.usage.collector.rules.UsageParametersRule
Set=ParsingModule
Operations=inc,rejectedTickets_SYN
UsageParametersFile=file:///var/opt/bits/App/stats/fixe/Fixe_Statistics.config


[/S05Rejected/02.Stats/02.SetRejectedEcscf]

ClassName=com.hp.usage.collector.rules.UsageParametersRule
Set=ParsingModule
Operations=inc,rejectedTickets_SYN
UsageParametersFile=file:///var/opt/bits/App/stats/fixe/Fixe_Statistics.config


[/S05Rejected/99.Store]

ClassName=StoreRule
LinkBundle=ims/attributes/common/normalizedformat


[/S99PostProcessing]

ClassName=AggregationScheme
RuleNames=99.Store


[/S99PostProcessing/99.Store]

Attributes=inputFileName
ClassName=StoreRule
